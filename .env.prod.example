###############################################################################
# Production Environment Variables for CS2 Inventory Management System
###############################################################################
#
# IMPORTANT: This is a template file for production deployment.
# Copy this file to `.env` on your production server and fill in real values.
#
# DO NOT commit the actual `.env` file with real secrets to version control!
#
###############################################################################

###> symfony/framework-bundle ###
# Application environment - MUST be 'prod' for production
APP_ENV=prod

# Application secret key - GENERATE A STRONG RANDOM VALUE
# Generate with: php -r "echo bin2hex(random_bytes(16));"
# Or use: openssl rand -hex 16
APP_SECRET=CHANGE_THIS_TO_A_STRONG_RANDOM_SECRET_KEY_32_CHARS_MIN
###< symfony/framework-bundle ###

###> Database Configuration ###
# External MariaDB Database Connection
# Format: mysql://username:password@hostname:port/database_name?serverVersion=mariadb-X.Y.Z
#
# Example with external MariaDB server:
# DATABASE_URL="mysql://cs2user:SecurePassword123@db.example.com:3306/cs2inventory?serverVersion=mariadb-11.4.8&charset=utf8mb4"
#
# Example with Amazon RDS MariaDB:
# DATABASE_URL="mysql://admin:password@mydb.abc123.us-east-1.rds.amazonaws.com:3306/cs2inventory?serverVersion=mariadb-11.4.8&charset=utf8mb4"
#
# NOTE: serverVersion must be full semantic version (major.minor.patch) to match your production database
DATABASE_URL="mysql://DB_USER:DB_PASSWORD@DB_HOST:3306/cs2inventory?serverVersion=mariadb-11.4.8&charset=utf8mb4"
###< Database Configuration ###

###> SteamWebAPI Configuration ###
# Your Steam Web API Key from https://www.steamwebapi.com/
STEAM_WEB_API_KEY=your-steam-web-api-key-here

# Steam Web API Base URL (usually no need to change)
STEAM_WEB_API_BASE_URL=https://www.steamwebapi.com/steam/api

# Local path for storing downloaded Steam item data
STEAM_ITEMS_STORAGE_PATH=var/data/steam-items

# Steam Item Sync Configuration (for cron-based sync)
SYNC_BATCH_SIZE=25
SYNC_MEMORY_LIMIT=768M
SYNC_MEMORY_WARNING_THRESHOLD=80
###< SteamWebAPI Configuration ###

###> symfony/lock ###
# Lock mechanism for rate limiting and other locking needs
# Options:
#   - flock: File-based locking (default, works in most environments)
#   - redis://localhost:6379: Redis-based locking (better for multi-server)
#   - semaphore: System V semaphores (if available)
LOCK_DSN=flock
###< symfony/lock ###

###> symfony/routing ###
# Default URI for generating URLs in CLI commands
# Should be your production domain with https://
DEFAULT_URI=https://cs2invman.gms.tools
###< symfony/routing ###

###> Docker Configuration ###
# Port to expose nginx on the host machine (default: 80)
# If you're running multiple applications, change this to avoid conflicts
NGINX_PORT=80
###< Docker Configuration ###

###############################################################################
# Production Deployment Notes:
###############################################################################
#
# 1. External MySQL Database Setup:
#    - Create database: CREATE DATABASE cs2inventory CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
#    - Create user: CREATE USER 'cs2user'@'%' IDENTIFIED BY 'SecurePassword123';
#    - Grant permissions: GRANT ALL PRIVILEGES ON cs2inventory.* TO 'cs2user'@'%';
#    - Ensure MySQL is accessible from Docker host (check firewall/security groups)
#
# 2. Required Environment Setup:
#    - Ensure var/cache, var/log, var/sessions, var/data directories exist and are writable
#    - Run migrations: docker compose -f compose.prod.yml exec php php bin/console doctrine:migrations:migrate
#
# 3. Building Frontend Assets:
#    - Build assets locally BEFORE deployment: npm run build
#    - Assets in public/build/ will be copied to the Docker image
#
# 4. SSL/HTTPS Configuration:
#    - Nginx listens on HTTP (port 80) only
#    - SSL termination should be handled externally (CloudFlare, AWS ALB, reverse proxy)
#    - Ensure trusted_proxies is configured in config/packages/framework.yaml
#
# 5. Security Checklist:
#    - Change APP_SECRET to a strong random value
#    - Use a strong database password
#    - Keep STEAM_WEB_API_KEY private
#    - Never commit this file with real secrets to git
#    - Set restrictive file permissions: chmod 600 .env
#
###############################################################################
